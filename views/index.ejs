<%- include('layouts.ejs')%>

<h2 class="text-2xl font-bold">Welcome to My Website</h2>
<p>This is the homepage content.</p>
<button id="copy-btn" class="ml-2 bg-green-500 p-3">Copy</button>

<div class="flex justify-center">
  <div
    class="max-w-4xl max-h-screen overflow-x-auto"
    style="background-color: rgba(13, 13, 13, 1)"
  >
    <pre id="json-viewer"></pre>
  </div>
</div>
<script>
  // ... (rest of your code remains the same)

  document.getElementById("copy-btn").addEventListener("click", function () {
    const jsonViewer = document.getElementById("json-viewer");
    const jsonText = jsonViewer.innerText;
    navigator.clipboard.writeText(jsonText).then(function () {
      console.log("JSON copied to clipboard");
    });
  });
</script>
<script>
  function syntaxHighlight(json) {
    json = json
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;");
    return json.replace(
      /("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,
      function (match) {
        var cls = "number";
        if (/^"/.test(match)) {
          if (/:$/.test(match)) {
            cls = "key";
          } else {
            cls = "string";
          }
        } else if (/true|false/.test(match)) {
          cls = "boolean";
        } else if (/null/.test(match)) {
          cls = "null";
        }
        return '<span class="' + cls + '">' + match + "</span>";
      }
    );
  }

  var obj = {
    name: "10 string",
    disc: "200 string",
    isValid: "true boolean",
    dataObject: { newKey: "10 string", name: "20 number" },
    dataArray: [{ name: "10 string" }],
    invalidType: "123 string",
    missingType: "500",
    arrayOfObjects: "[1,2,3] array",
    // arrayWithCount: "5 arraywithcount",
    // objectsWithCount: "3 user objectwithcount",

    nestedArray: [
      "3 number",
      "false boolean",
      { deep: ["4 number", "invalid type"] },
      [
        "5 string",
        {
          deeper: '{"nested":"yes"} object',
        },
      ],
    ],
    nestedObject: {
      level1: "15 number",
      level2: {
        level3: "false boolean",
      },
    },
  };

  fetchData(function (response) {
    let newColor = syntaxHighlight(
      JSON.stringify(response?.data, undefined, 4)
    );
    console.log(response);

    document.getElementById("json-viewer").innerHTML = newColor;
  });
</script>
